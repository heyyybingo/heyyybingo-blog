---
title: 如何判断对象为数组
date: 2022-10-23 21:00:00
categories:
  - js基础
tags:
  - js
  - error
---

# js 异常

## window.onerror

```js
window.onerror = function(message, source, lineno, colno, error) { ... }
```

浏览器为了安全方面的考虑，对于不同域的 Javascript 文件，通过 window.onError 无法获取有效的错误信息,会出现 script error，而且无法获得确切的行号，更没有错误堆栈信息
为了使得浏览器针对 window.onError 的跨域保护失效, 我们可以在静态资源服务器或者 CDN 的 HTTP 头中加上如下允许跨域提示

```html
<script crossorigin src=""></script>
```

# promise 异常

## node

- unhandledRejection：在一轮事件循环中，当 promise 被拒绝时，会触发该事件
- 在一轮事件循环中，当 promise 拒绝处理后，会触发该事件

## 浏览器端

- onunhandledrejection
- onrejectionhandled
