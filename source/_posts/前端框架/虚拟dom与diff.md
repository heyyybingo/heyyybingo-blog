---
title: 虚拟dom与diff
date: 2022-09-13 21:00:00
categories:
  - 前端框架
tags:
  - Diff
  - virtual dom
---

# 什么是虚拟 dom

虚拟 dom 是一个表示真实 dom 的 js 对象

- 数据修改->更新 dom
- 数据修改->更新虚拟 dom->更新 dom

## 什么是 diff 算法

Diff 算法是一种对比算法。对比两者是旧虚拟 DOM 和新虚拟 DOM，对比出是哪个虚拟节点更改了，找出这个虚拟节点，并只更新这个虚拟节点所对应的真实节点，而不用更新其他数据没发生改变的节点，实现精准地更新真实 DOM，进而提高效率。

# 策略

- tree 层级
- component 层级
- element 层级

## tree 层级

DOM 节点跨层级的操作不做优化，只会对相同层级的节点进行比较

## component 层级

如果是同一个类的组件，则会继续往下 diff 运算，如果不是一个类的组件，那么直接删除这个组件下的所有子节点，创建新的

## element 层级

对于比较同一层级的节点们，每个节点在对应的层级用唯一的 key 作为标识
